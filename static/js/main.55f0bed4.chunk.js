(this["webpackJsonpreact-dialog-example"]=this["webpackJsonpreact-dialog-example"]||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var s={};a.r(s),a.d(s,"MessageReaded",(function(){return b})),a.d(s,"MessageSended",(function(){return h}));var c=a(1),n=a(8),i=a.n(n),r=a(9),d=a.n(r),o=a(3),u=a.n(o),m=a(4),l=a(2),j=a(6),g=a.n(j),v=a(5),b=['<path \n\t\td="M773.495 279.073l-61.528-61.528-276.876 276.876 61.528 61.528 276.876-276.876zM958.077 217.545l-461.46 465.855-184.584-184.584-61.528 61.528 246.112 246.112 527.383-527.383-65.923-61.528zM0 560.344l246.112 246.112 61.528-61.528-246.112-246.112-61.528 61.528z"\n\t/>',"0 0 1024 1024"],h=['<path \n\t\td="M958.077 217.545l-461.46 465.855-184.584-184.584-61.528 61.528 246.112 246.112 527.383-527.383-65.923-61.528zM0 560.344v0z"\n\t/>',"0 0 1024 1024"],p=a(0),O=function(e){var t=e.size,a=void 0===t?20:t,c=e.name,n=e.className,i=void 0===n?"":n,r=a instanceof Array?a:[a,a],d=Object(m.a)(r,2),o=d[0],u=d[1],l=Object(m.a)(s[c],2),j=l[0],v=l[1];return Object(p.jsx)("svg",{className:g()("icon",i),width:o,height:u,dangerouslySetInnerHTML:{__html:j},viewBox:v})},f=(a(16),function(e){var t=e.isReverse,a=e.isRemovable,s=e.messages,c=e.avatar,n=e.onRemove,i=function(e){var t=e.currentTarget.dataset.id;n(+t)};return Object(p.jsxs)("div",{className:g()("item",{reverse:t,removable:a}),children:[Object(p.jsx)("img",{src:c,className:"avatar",alt:"Avatar"}),Object(p.jsx)("div",{className:"list",children:s.map((function(e){return Object(p.jsxs)("div",{className:"list-item",children:[Object(p.jsx)("div",{className:"text",children:e.text}),Object(p.jsx)("div",{className:"time",children:u()(e.date).format("HH:mm")}),Object(p.jsx)(O,{size:15,className:"message-status",name:"sended"===e.status?"MessageSended":"MessageReaded"}),Object(p.jsx)(v.c,{"data-id":e.id,size:18,className:"remove-message",onClick:i})]},e.id)}))})]})}),x=a(10),y=a.n(x);a(17);u.a.extend(y.a);var M=function(e){var t=e.date;return Object(p.jsx)("div",{className:"title",children:u()(t).calendar(null,{sameDay:"[\u0421\u0435\u0433\u043e\u0434\u043d\u044f]",lastWeek:"DD MMMM",sameElse:"DD MMMM YYYY"})})};function N(e,t){switch(t.type){case"remove-message":return Object(l.a)(Object(l.a)({},e),{},{messages:e.messages.filter((function(e){return e.id!==t.payload}))});case"add-message":return Object(l.a)(Object(l.a)({},e),{},{messages:e.messages.concat(t.payload)});case"update-status":return Object(l.a)(Object(l.a)({},e),{},{messages:e.messages.map((function(e){return e.id===t.payload.id?Object(l.a)(Object(l.a)({},e),{},{status:t.payload.status}):e}))});default:throw new Error("Unknown action type")}}var w=[{avatar:"https://sun9-2.userapi.com/c638729/v638729951/1d0ea/f9V7aJyh6tw.jpg",message:"\u041f\u0440\u0438\u0432\u0435\u0442",id:0,date:"2020-10-11T10:09:04.712Z",is:"her"},{avatar:"https://sun9-2.userapi.com/c638729/v638729951/1d0ea/f9V7aJyh6tw.jpg",message:"\u041a\u0430\u043a \u0434\u0435\u043b\u0430?",id:1,date:"2020-10-11T10:19:04.712Z",is:"her"},{avatar:"https://sun9-2.userapi.com/c638729/v638729951/1d0ea/f9V7aJyh6tw.jpg",message:"\u042f \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u0438\u0435\u0445\u0430\u043b \u0441 \u041c\u0430\u0440\u0441\u0430",id:2,date:"2020-10-11T10:24:04.712Z",is:"her"},{avatar:"https://sun9-58.userapi.com/c836638/v836638514/867c/SPMigNB8gw0.jpg",message:"\u041f\u0440\u0438\u0432\u0435\u0442! \u0412\u0441\u0435 \u0445\u043e\u0440\u043e\u0448\u043e, \u0442\u044b \u043a\u0430\u043a?",id:3,date:"2020-10-11T11:09:04.712Z",status:"sended",is:"my"},{avatar:"https://sun9-58.userapi.com/c836638/v836638514/867c/SPMigNB8gw0.jpg",message:"\u0410\u0430\u0430, \u0434\u0430, \u044f \u0441\u043b\u044b\u0448\u0430\u043b",id:4,date:"2020-10-11T12:09:04.712Z",status:"sended",is:"my"},{avatar:"https://sun9-58.userapi.com/c836638/v836638514/867c/SPMigNB8gw0.jpg",message:"\u041a\u0440\u0443\u0442\u043e",id:5,date:"2020-10-11T13:01:04.712Z",status:"readed",is:"my"},{avatar:"https://sun9-58.userapi.com/c836638/v836638514/867c/SPMigNB8gw0.jpg",message:"\u041f\u043e\u043b\u0435\u0442 \u043d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u044b\u0439?",id:6,date:"2020-10-11T14:09:07.712Z",status:"readed",is:"my"},{avatar:"https://sun9-2.userapi.com/c638729/v638729951/1d0ea/f9V7aJyh6tw.jpg",message:"\u0414\u0430, \u0432\u0441\u0435 \u043a\u0440\u0443\u0442\u043e. \u0422\u043e\u043b\u044c\u043a\u043e \u043d\u0438\u043a\u043e\u043c\u0443 \u043d\u0435 \u0433\u043e\u0432\u043e\u0440\u0438)",id:7,date:"2020-10-11T15:09:04.712Z",is:"her"}],S=(a(18),function(e){var t=e.newMessage,a=Object(c.useRef)(),s=Object(c.useReducer)(N,{messages:w}),n=Object(m.a)(s,2),i=n[0],r=n[1];Object(c.useEffect)((function(){console.log("newMessage: ",t),t&&(r({type:"add-message",payload:t}),setTimeout((function(){r({type:"update-status",payload:{id:t.id,status:"readed"}})}),1e3))}),[t]),Object(c.useEffect)((function(){a.current.scrollTop=a.current.scrollHeight}),[i.messages.length]);var d=function(e){r({type:"remove-message",payload:e})},o=function(e){var t=[];return e.forEach((function(a,s){if(0===s||e[s-1]){var c=u()((0===s?a:e[s-1]).date).diff(a.date,"day");(0===s||c)&&t.push({type:"title",id:"item-title-".concat(a.id),date:a.date})}if(0===s||a.is!==e[s-1].is)t.push({type:"message",id:"item-message-".concat(a.id),avatar:a.avatar,isReverse:"my"===a.is,isRemovable:"my"===a.is,messages:[{text:a.message,status:a.status,id:a.id,date:a.date}]});else{var n=t.length-1;t[n]=Object(l.a)(Object(l.a)({},t[n]),{},{messages:t[n].messages.concat({text:a.message,status:a.status,id:a.id,date:a.date})})}})),t}(i.messages);return Object(p.jsx)("div",{className:"dialog",children:Object(p.jsx)("div",{className:"overflow",ref:a,children:o.map((function(e){return"message"===e.type?Object(c.createElement)(f,Object(l.a)(Object(l.a)({},e),{},{key:e.id,onRemove:d})):Object(p.jsx)(M,{date:e.date},e.id)}))})})}),T=(a(19),function(){return Object(p.jsxs)("div",{className:"user-info",children:[Object(p.jsx)("div",{className:"name",children:"Vlad Dev"}),Object(p.jsxs)("div",{className:"status",children:[Object(p.jsx)("span",{className:"circle"}),"\u0412 \u0441\u0435\u0442\u0438"]})]})}),k=Object(c.createContext)(),z=(a(20),function(){var e=Object(c.useContext)(k),t=e.theme,a=e.toggleTheme;return Object(p.jsx)("div",{className:"theme","data-theme":"light"===t?"dark":"light",onClick:function(e){var t=e.currentTarget.dataset.theme;a(t)},children:"light"===t?Object(p.jsx)(v.a,{size:20,className:"dark"}):Object(p.jsx)(v.b,{className:"yellow",size:20})})}),R=(a(21),function(){return Object(p.jsxs)("div",{className:"header",children:[Object(p.jsx)(T,{}),Object(p.jsx)(z,{})]})}),D=(a(22),function(e){var t=e.onAddMessage,a=Object(c.useState)(""),s=Object(m.a)(a,2),n=s[0],i=s[1];return Object(p.jsxs)("form",{className:"sender",onSubmit:function(e){e.preventDefault(),t({id:Date.now(),avatar:"https://sun9-58.userapi.com/c836638/v836638514/867c/SPMigNB8gw0.jpg",message:n,date:(new Date).toISOString(),is:"my",status:"sended"}),i("")},children:[Object(p.jsx)("input",{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",value:n,onChange:function(e){return i(e.target.value)},required:!0}),Object(p.jsx)("button",{children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})}),E=function(){var e=Object(c.useState)(null),t=Object(m.a)(e,2),a=t[0],s=t[1],n=Object(c.useState)(localStorage.getItem("application-theme")||"dark"),i=Object(m.a)(n,2),r=i[0],d=i[1];return Object(c.useEffect)((function(){!function(e){localStorage.setItem("application-theme",e),"dark"===e?(document.body.classList.add("dark"),document.body.classList.remove("light")):(document.body.classList.add("light"),document.body.classList.remove("dark"))}(r)}),[r]),Object(p.jsx)(k.Provider,{value:{theme:r,toggleTheme:d},children:Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)(R,{}),Object(p.jsx)(S,{newMessage:a}),Object(p.jsx)(D,{onAddMessage:s})]})})};a(23),a(24);d.a.load({google:{families:["Open Sans:300,400,700"]}}),u.a.locale("ru"),i.a.render(Object(p.jsx)(c.StrictMode,{children:Object(p.jsx)(E,{})}),document.getElementById("root"))}],[[25,1,2]]]);
//# sourceMappingURL=main.55f0bed4.chunk.js.map